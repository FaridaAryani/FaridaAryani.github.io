<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Glow-Up Journey | 30-Day Tracker</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#FF6B6B',
            secondary: '#4ECDC4',
            accent: '#FFE66D',
            dark: '#292F36',
            light: '#F7FFF7',
          },
          fontFamily: {
            sans: ['Poppins', 'sans-serif'],
          },
        }
      }
    }
  </script>
  <style>
    .gradient-bg {
      background: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);
    }
    .task-card {
      transition: all 0.3s ease;
    }
    .task-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    .progress-ring__circle {
      transition: stroke-dashoffset 0.5s ease;
      transform: rotate(-90deg);
      transform-origin: 50% 50%;
    }
  </style>
</head>
<body class="bg-light font-sans text-dark">
  <div class="min-h-screen pb-10">
    <!-- Header -->
    <header class="gradient-bg text-white py-6 shadow-lg">
      <div class="container mx-auto px-4 text-center">
        <h1 class="text-4xl font-bold mb-2">My Glow-Up Journey</h1>
        <p class="text-xl opacity-90">30 Days to a Better Me</p>
      </div>
    </header>

    <div class="container mx-auto px-4 py-8 max-w-4xl">
      <!-- Start Date Selector -->
      <div class="bg-white rounded-xl shadow-md p-6 mb-6">
        <h2 class="text-2xl font-semibold mb-4 text-center">Set Your Start Date</h2>
        <div class="flex flex-col md:flex-row items-center justify-center gap-4">
          <input type="date" id="start-date" class="p-3 rounded-lg border-2 border-secondary focus:border-primary focus:ring-2 focus:ring-primary text-lg font-medium">
          <button onclick="setStartDate()" class="px-6 py-3 bg-primary text-white rounded-lg hover:bg-opacity-90 transition font-medium">Set Date</button>
        </div>
        <div id="date-range-display" class="mt-4 text-center text-lg font-medium hidden">
          Your journey: <span id="start-date-display"></span> to <span id="end-date-display"></span>
        </div>
      </div>

      <!-- Day Selector -->
      <div class="bg-white rounded-xl shadow-md p-6 mb-8">
        <h2 class="text-2xl font-semibold mb-4 text-center">Select Your Day</h2>
        <div class="relative">
          <select id="day" class="w-full p-4 pr-10 rounded-lg border-2 border-secondary focus:border-primary focus:ring-2 focus:ring-primary appearance-none text-lg font-medium" onchange="updateTasks()">
            <option value="1">Day 1 - Let's Begin!</option>
            <option value="2">Day 2 - Building Momentum</option>
            <option value="3">Day 3 - Finding Rhythm</option>
            <option value="4">Day 4 - Consistency is Key</option>
            <option value="5">Day 5 - Pushing Forward</option>
            <option value="6">Day 6 - Almost There</option>
            <option value="7">Day 7 - Rest & Reflect</option>
            <option value="8">Day 8 - Level Up!</option>
            <option value="9">Day 9 - Stronger Every Day</option>
            <option value="10">Day 10 - Double Digits!</option>
            <option value="11">Day 11 - Making Progress</option>
            <option value="12">Day 12 - Halfway Mark</option>
            <option value="13">Day 13 - Keep Going</option>
            <option value="14">Day 14 - Rest Day</option>
            <option value="15">Day 15 - New Challenges</option>
            <option value="16">Day 16 - Building Habits</option>
            <option value="17">Day 17 - Seeing Results</option>
            <option value="18">Day 18 - Staying Motivated</option>
            <option value="19">Day 19 - Almost There</option>
            <option value="20">Day 20 - Two-Thirds Done!</option>
            <option value="21">Day 21 - Rest & Recharge</option>
            <option value="22">Day 22 - Final Push</option>
            <option value="23">Day 23 - Breaking Limits</option>
            <option value="24">Day 24 - So Close!</option>
            <option value="25">Day 25 - Almost There</option>
            <option value="26">Day 26 - Final Stretch</option>
            <option value="27">Day 27 - Last Efforts</option>
            <option value="28">Day 28 - Rest Day</option>
            <option value="29">Day 29 - Preparing for Success</option>
            <option value="30">Day 30 - Final Day!</option>
          </select>
          <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
            <svg class="fill-current h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
          </div>
        </div>
        <div id="current-date-display" class="mt-2 text-center text-gray-600 font-medium"></div>
      </div>

      <!-- Progress Overview -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
        <!-- Overall Progress -->
        <div class="bg-white rounded-xl shadow-md p-6">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-xl font-semibold">Overall Progress</h2>
            <div class="relative w-16 h-16">
              <svg class="w-full h-full" viewBox="0 0 36 36">
                <path d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"
                  fill="none"
                  stroke="#E0E0E0"
                  stroke-width="3"/>
                <path id="overall-progress-ring" d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"
                  fill="none"
                  stroke="#4ECDC4"
                  stroke-width="3"
                  stroke-dasharray="100, 100"/>
                <text x="18" y="20.5" text-anchor="middle" font-size="8" fill="#292F36" font-weight="bold">0%</text>
              </svg>
            </div>
          </div>
          <p id="progress" class="text-lg">Completed: <span class="font-bold">0</span> of <span class="font-bold">0</span> tasks</p>
          <div class="mt-4">
            <div class="flex justify-between mb-1">
              <span class="text-sm font-medium">Weight Loss</span>
              <span id="weight-progress" class="text-sm font-medium">0/30 days</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2.5">
              <div id="weight-bar" class="bg-primary h-2.5 rounded-full" style="width: 0%"></div>
            </div>
          </div>
        </div>

        <!-- Daily Progress -->
        <div class="bg-white rounded-xl shadow-md p-6">
          <h2 class="text-xl font-semibold mb-4">Day <span id="current-day">1</span> Progress</h2>
          <div class="flex items-center justify-center mb-4">
            <div class="relative w-32 h-32">
              <svg class="w-full h-full" viewBox="0 0 36 36">
                <path d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"
                  fill="none"
                  stroke="#E0E0E0"
                  stroke-width="3"/>
                <path id="daily-progress-ring" d="M18 2.0845
                  a 15.9155 15.9155 0 0 1 0 31.831
                  a 15.9155 15.9155 0 0 1 0 -31.831"
                  fill="none"
                  stroke="#FF6B6B"
                  stroke-width="3"
                  stroke-dasharray="0, 100"/>
                <text x="18" y="20.5" text-anchor="middle" font-size="10" fill="#292F36" font-weight="bold">0%</text>
              </svg>
            </div>
          </div>
          <p id="progress-text" class="text-center text-lg">You're just getting started!</p>
        </div>
      </div>

      <!-- Tasks -->
      <div class="bg-white rounded-xl shadow-md overflow-hidden">
        <div class="gradient-bg px-6 py-4">
          <h2 class="text-2xl font-bold text-white">Day <span id="current-day-text">1</span> Tasks - <span id="current-date-task"></span></h2>
        </div>
        <div class="p-6">
          <ul id="tasks" class="space-y-4">
            <!-- Tasks will be loaded by JavaScript -->
          </ul>
        </div>
      </div>

      <!-- Motivational Quote -->
      <div id="motivation" class="mt-8 text-center italic text-lg text-gray-600">
        "The secret of getting ahead is getting started." - Mark Twain
      </div>
    </div>
  </div>

  <script>
    // Initialize tasksByDay, loading from localStorage if available
    let tasksByDay = JSON.parse(localStorage.getItem('tasksByDay')) || {
      1: [
        { category: "Fitness", task: "Morning yoga (30 min) + 10K steps", emoji: "ðŸ§˜â€â™€ï¸", completed: false, link: "" },
        { category: "Study", task: "Complete 1 LeetCode problem", emoji: "ðŸ’»", completed: false, link: "" },
        { category: "Language", task: "Duolingo Mandarin (15 min)", emoji: "ðŸ“š", completed: false, link: "" },
        { category: "Content", task: "Post workout selfie + progress", emoji: "ðŸ“¸", completed: false, link: "" },
        { category: "Nutrition", task: "Meal prep healthy lunches", emoji: "ðŸ¥—", completed: false, link: "" },
        { category: "Skill", task: "Watch 1 tech tutorial video", emoji: "ðŸŽ¥", completed: false, link: "" }
      ],
      2: [
        { category: "Fitness", task: "HIIT workout (30 min) + 10K steps", emoji: "ðŸ”¥", completed: false, link: "" },
        { category: "Study", task: "Work on personal project (1 hour)", emoji: "ðŸ’»", completed: false, link: "" },
        { category: "Language", task: "Practice 10 new Mandarin words", emoji: "ðŸ“š", completed: false, link: "" },
        { category: "Content", task: "Share healthy meal on stories", emoji: "ðŸ“¸", completed: false, link: "" },
        { category: "Self-Care", task: "Skincare routine + face mask", emoji: "ðŸ’†â€â™€ï¸", completed: false, link: "" },
        { category: "Skill", task: "Learn 1 new CSS trick", emoji: "ðŸŽ¨", completed: false, link: "" }
      ],
      3: [
        { category: "Fitness", task: "Dance workout (45 min) + 10K steps", emoji: "ðŸ’ƒ", completed: false, link: "" },
        { category: "Study", task: "Study algorithms (1 hour)", emoji: "ðŸ“Š", completed: false, link: "" },
        { category: "Language", task: "Watch Mandarin show with subtitles", emoji: "ðŸ“º", completed: false, link: "" },
        { category: "Content", task: "Post study setup photo", emoji: "ðŸ“¸", completed: false, link: "" },
        { category: "Nutrition", task: "No sugary drinks today", emoji: "ðŸš«", completed: false, link: "" },
        { category: "Skill", task: "Practice Git commands", emoji: "ðŸ”„", completed: false, link: "" }
      ],
      4: [
        { category: "Fitness", task: "Strength training (45 min) + 10K steps", emoji: "ðŸ‹ï¸â€â™€ï¸", completed: false, link: "" },
        { category: "Study", task: "Complete coding challenge", emoji: "âŒ¨ï¸", completed: false, link: "" },
        { category: "Language", task: "Practice Mandarin with friend", emoji: "ðŸ—£ï¸", completed: false, link: "" },
        { category: "Content", task: "Share workout progress video", emoji: "ðŸŽ¥", completed: false, link: "" },
        { category: "Self-Care", task: "Journal 3 things you're grateful for", emoji: "ðŸ“”", completed: false, link: "" },
        { category: "Skill", task: "Read tech article", emoji: "ðŸ“°", completed: false, link: "" }
      ],
      5: [
        { category: "Fitness", task: "Pilates (30 min) + 12K steps", emoji: "ðŸ§˜â€â™€ï¸", completed: false, link: "" },
        { category: "Study", task: "Work on portfolio website", emoji: "ðŸ–¥ï¸", completed: false, link: "" },
        { category: "Language", task: "Learn 5 tech terms in Mandarin", emoji: "ðŸ“š", completed: false, link: "" },
        { category: "Content", task: "Post healthy breakfast recipe", emoji: "ðŸ³", completed: false, link: "" },
        { category: "Nutrition", task: "Drink 2L water today", emoji: "ðŸ’§", completed: false, link: "" },
        { category: "Skill", task: "Try new JavaScript feature", emoji: "âš¡", completed: false, link: "" }
      ],
      6: [
        { category: "Fitness", task: "Outdoor run (30 min) + 15K steps", emoji: "ðŸƒâ€â™€ï¸", completed: false, link: "" },
        { category: "Study", task: "Review week's learning", emoji: "ðŸ“", completed: false, link: "" },
        { category: "Language", task: "Write short paragraph in Mandarin", emoji: "âœï¸", completed: false, link: "" },
        { category: "Content", task: "Post weekend study vlog", emoji: "ðŸŽ¥", completed: false, link: "" },
        { category: "Self-Care", task: "Digital detox for 2 hours", emoji: "ðŸ“µ", completed: false, link: "" },
        { category: "Skill", task: "Contribute to open source", emoji: "ðŸ‘©â€ðŸ’»", completed: false, link: "" }
      ],
      7: [
        { category: "Fitness", task: "Gentle walk (30 min)", emoji: "ðŸš¶â€â™€ï¸", completed: false, link: "" },
        { category: "Reflection", task: "Journal about week's progress", emoji: "ðŸ“”", completed: false, link: "" },
        { category: "Content", task: "Post weekly recap", emoji: "ðŸ“¸", completed: false, link: "" },
        { category: "Self-Care", task: "Full skincare routine", emoji: "ðŸ’†â€â™€ï¸", completed: false, link: "" },
        { category: "Planning", task: "Prepare for next week", emoji: "ðŸ“…", completed: false, link: "" }
      ],
      8: [
        { category: "Fitness", task: "HIIT + abs (45 min) + 12K steps", emoji: "ðŸ”¥", completed: false, link: "" },
        { category: "Study", task: "Learn new framework basics", emoji: "ðŸ§ ", completed: false, link: "" },
        { category: "Language", task: "Mandarin flashcards (20 min)", emoji: "ðŸ“‡", completed: false, link: "" },
        { category: "Content", task: "Post workout transformation", emoji: "ðŸ“¸", completed: false, link: "" },
        { category: "Nutrition", task: "Try new healthy recipe", emoji: "ðŸ²", completed: false, link: "" },
        { category: "Skill", task: "Build small UI component", emoji: "ðŸ–Œï¸", completed: false, link: "" }
      ],
      14: [
        { category: "Fitness", task: "Yoga + stretching (40 min)", emoji: "ðŸ§˜â€â™€ï¸", completed: false, link: "" },
        { category: "Reflection", task: "Mid-challenge progress review", emoji: "ðŸ“Š", completed: false, link: "" },
        { category: "Content", task: "Share before/after photos", emoji: "ðŸ“¸", completed: false, link: "" },
        { category: "Self-Care", task: "Pamper evening", emoji: "âœ¨", completed: false, link: "" },
        { category: "Planning", task: "Set goals for week 3", emoji: "ðŸŽ¯", completed: false, link: "" }
      ],
      15: [
        { category: "Fitness", task: "Strength training (50 min) + 15K steps", emoji: "ðŸ‹ï¸â€â™€ï¸", completed: false, link: "" },
        { category: "Study", task: "Complete 2 LeetCode problems", emoji: "ðŸ’»", completed: false, link: "" },
        { category: "Language", task: "Watch Mandarin tech video", emoji: "ðŸ“º", completed: false, link: "" },
        { category: "Content", task: "Post coding setup", emoji: "ðŸ–¥ï¸", completed: false, link: "" },
        { category: "Nutrition", task: "Meal prep high-protein meals", emoji: "ðŸ—", completed: false, link: "" },
        { category: "Skill", task: "Practice debugging techniques", emoji: "ðŸž", completed: false, link: "" }
      ],
      21: [
        { category: "Fitness", task: "Active recovery day (walk/yoga)", emoji: "ðŸš¶â€â™€ï¸", completed: false, link: "" },
        { category: "Reflection", task: "Journal about habits formed", emoji: "ðŸ“”", completed: false, link: "" },
        { category: "Content", task: "Share favorite healthy snacks", emoji: "ðŸ", completed: false, link: "" },
        { category: "Self-Care", task: "Meditation session", emoji: "ðŸ§ ", completed: false, link: "" },
        { category: "Planning", task: "Final week preparation", emoji: "ðŸ“…", completed: false, link: "" }
      ],
      22: [
        { category: "Fitness", task: "Circuit training (50 min) + 15K steps", emoji: "â±ï¸", completed: false, link: "" },
        { category: "Study", task: "Work on complex project", emoji: "ðŸ’»", completed: false, link: "" },
        { category: "Language", task: "Have conversation in Mandarin", emoji: "ðŸ—£ï¸", completed: false, link: "" },
        { category: "Content", task: "Post final stretch motivation", emoji: "ðŸ’ª", completed: false, link: "" },
        { category: "Nutrition", task: "Track macros carefully", emoji: "ðŸ“Š", completed: false, link: "" },
        { category: "Skill", task: "Learn optimization techniques", emoji: "âš¡", completed: false, link: "" }
      ],
      28: [
        { category: "Fitness", task: "Gentle yoga + reflection", emoji: "ðŸ§˜â€â™€ï¸", completed: false, link: "" },
        { category: "Reflection", task: "Write about journey so far", emoji: "ðŸ“”", completed: false, link: "" },
        { category: "Content", task: "Post progress collage", emoji: "ðŸ“¸", completed: false, link: "" },
        { category: "Self-Care", task: "Relaxing bath", emoji: "ðŸ›", completed: false, link: "" },
        { category: "Planning", task: "Prepare for final push", emoji: "âœŠ", completed: false, link: "" }
      ],
      29: [
        { category: "Fitness", task: "Full body workout (60 min) + 15K steps", emoji: "ðŸ’ª", completed: false, link: "" },
        { category: "Study", task: "Finalize portfolio projects", emoji: "ðŸ–¥ï¸", completed: false, link: "" },
        { category: "Language", task: "Test Mandarin proficiency", emoji: "ðŸ“", completed: false, link: "" },
        { category: "Content", task: "Share before/after stats", emoji: "ðŸ“Š", completed: false, link: "" },
        { category: "Nutrition", task: "Perfect day of eating", emoji: "ðŸ½ï¸", completed: false, link: "" },
        { category: "Skill", task: "Review all learned skills", emoji: "ðŸ“š", completed: false, link: "" }
      ],
      30: [
        { category: "Fitness", task: "Celebration workout!", emoji: "ðŸŽ‰", completed: false, link: "" },
        { category: "Study", task: "Plan next learning steps", emoji: "ðŸ“…", completed: false, link: "" },
        { category: "Language", task: "Set new Mandarin goals", emoji: "ðŸŽ¯", completed: false, link: "" },
        { category: "Content", task: "Final results reveal", emoji: "ðŸ“¸", completed: false, link: "" },
        { category: "Reflection", task: "Write about 30-day journey", emoji: "ðŸ“”", completed: false, link: "" },
        { category: "Celebration", task: "Treat yourself!", emoji: "ðŸŽ", completed: false, link: "" }
      ]
    };

    // Motivational quotes for each day
    const motivationalQuotes = [
      "The secret of getting ahead is getting started.",
      "Small steps every day lead to big results.",
      "Consistency is the key to success.",
      "You're stronger than you think.",
      "Progress, not perfection.",
      "Every expert was once a beginner.",
      "Rest is part of the journey.",
      "Level up! You're doing amazing.",
      "Growth happens outside your comfort zone.",
      "Double digits! Keep pushing forward.",
      "Success is the sum of small efforts.",
      "Halfway there! You've got this.",
      "The harder you work, the luckier you get.",
      "Rest, recharge, reflect.",
      "New week, new challenges!",
      "Good habits are as addictive as bad ones.",
      "Results take time, keep going!",
      "Motivation gets you started, habit keeps you going.",
      "Almost there! Stay focused.",
      "Two-thirds done! Final stretch ahead.",
      "Rest days make your workout days better.",
      "Final push! Give it your all.",
      "Limits exist only in your mind.",
      "So close! Keep that momentum.",
      "Success is just around the corner.",
      "Final stretch! Almost there.",
      "Last efforts before victory.",
      "Rest up for the final day!",
      "Prepare for success tomorrow.",
      "You did it! 30 days of growth."
    ];

    // Date functionality
    let startDate = null;
    let dateRangeSet = false;

    // Load start date from localStorage if available
    if (localStorage.getItem('startDate')) {
      startDate = new Date(localStorage.getItem('startDate'));
      updateDateDisplay();
      dateRangeSet = true;
    }

    function setStartDate() {
      const dateInput = document.getElementById('start-date');
      if (!dateInput.value) {
        alert('Please select a start date!');
        return;
      }
      
      startDate = new Date(dateInput.value);
      localStorage.setItem('startDate', startDate.toISOString());
      updateDateDisplay();
      dateRangeSet = true;
      
      // Show success message
      const dateDisplay = document.getElementById('date-range-display');
      dateDisplay.classList.remove('hidden');
      dateDisplay.classList.add('animate-pulse');
      setTimeout(() => {
        dateDisplay.classList.remove('animate-pulse');
      }, 1000);
    }

    function updateDateDisplay() {
      if (!startDate) return;
      
      // Format start date
      const startDateStr = formatDate(startDate);
      document.getElementById('start-date-display').textContent = startDateStr;
      
      // Calculate and format end date (29 days after start)
      const endDate = new Date(startDate);
      endDate.setDate(endDate.getDate() + 29);
      const endDateStr = formatDate(endDate);
      document.getElementById('end-date-display').textContent = endDateStr;
      
      // Update current day's date
      updateCurrentDateDisplay();
    }

    function formatDate(date) {
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      return date.toLocaleDateString('id-ID', options);
    }

    function getDateForDay(day) {
      if (!startDate) return null;
      
      const date = new Date(startDate);
      date.setDate(date.getDate() + (day - 1));
      return date;
    }

    function updateCurrentDateDisplay() {
      if (!dateRangeSet) return;
      
      const day = parseInt(document.getElementById('day').value);
      const date = getDateForDay(day);
      
      if (date) {
        const dateStr = formatDate(date);
        document.getElementById('current-date-display').textContent = dateStr;
        document.getElementById('current-date-task').textContent = dateStr;
      }
    }

    function updateTasks() {
      const day = document.getElementById('day').value;
      const dayNum = parseInt(day);
      document.getElementById('current-day').textContent = dayNum;
      document.getElementById('current-day-text').textContent = dayNum;
      
      // Update date display if set
      if (dateRangeSet) {
        updateCurrentDateDisplay();
      }
      
      // Update motivational quote
      document.getElementById('motivation').textContent = `"${motivationalQuotes[dayNum-1]}"`;
      
      const tasks = tasksByDay[day] || [];
      const taskList = document.getElementById('tasks');
      taskList.innerHTML = '';

      if (tasks.length === 0) {
        taskList.innerHTML = '<p class="text-center py-4">No tasks for this day. Enjoy your rest!</p>';
      } else {
        tasks.forEach((task, index) => {
          const li = document.createElement('li');
          li.className = `task-card bg-white rounded-lg shadow p-4 border-l-4 ${getCategoryBorder(task.category)} ${task.completed ? 'opacity-80' : ''}`;
          li.innerHTML = `
            <div class="flex items-start">
              <div class="flex-shrink-0 pt-1">
                <input type="checkbox" id="task-${day}-${index}" ${task.completed ? 'checked' : ''} 
                      class="h-5 w-5 rounded border-gray-300 text-primary focus:ring-primary" 
                      onchange="toggleTask(${day}, ${index}, this)">
              </div>
              <div class="ml-3 flex-1">
                <label for="task-${day}-${index}" class="block text-lg ${task.completed ? 'line-through text-gray-500' : 'text-gray-800'}">
                  <span class="font-semibold">${task.emoji} ${task.category}</span>: ${task.task}
                </label>
                <div class="mt-2 flex items-center">
                  <input type="text" id="link-${day}-${index}" placeholder="Paste your progress link here..." 
                        value="${task.link || ''}" class="flex-1 p-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"
                        onblur="updateLink(${day}, ${index}, this.value)">
                  ${task.link ? `<a href="${task.link}" target="_blank" class="ml-2 px-3 py-2 bg-secondary text-white rounded-lg hover:bg-opacity-90 transition">View</a>` : ''}
                </div>
              </div>
            </div>
          `;
          taskList.appendChild(li);
        });
      }

      updateProgress();
      updateDailyProgressBar(day);
    }

    function getCategoryBorder(category) {
      switch(category) {
        case 'Fitness': return 'border-primary';
        case 'Study': return 'border-blue-500';
        case 'Language': return 'border-green-500';
        case 'Content': return 'border-pink-500';
        case 'Nutrition': return 'border-yellow-500';
        case 'Self-Care': return 'border-purple-500';
        case 'Skill': return 'border-indigo-500';
        case 'Reflection': return 'border-gray-500';
        case 'Planning': return 'border-teal-500';
        case 'Celebration': return 'border-red-500';
        default: return 'border-gray-300';
      }
    }

    function toggleTask(day, index, checkbox) {
      const task = tasksByDay[day][index];
      if (checkbox.checked && !task.link) {
        alert('Please add a progress link before marking as complete!');
        checkbox.checked = false;
        return;
      }
      tasksByDay[day][index].completed = checkbox.checked;
      localStorage.setItem('tasksByDay', JSON.stringify(tasksByDay));
      updateTasks();
      
      // Add celebration effect for completed tasks
      if (checkbox.checked) {
        const taskElement = checkbox.closest('.task-card');
        taskElement.classList.add('animate-pulse');
        setTimeout(() => {
          taskElement.classList.remove('animate-pulse');
        }, 1000);
      }
    }

    function updateLink(day, index, link) {
      tasksByDay[day][index].link = link.trim();
      localStorage.setItem('tasksByDay', JSON.stringify(tasksByDay));
      updateTasks();
    }

    function updateProgress() {
      let totalTasks = 0;
      let completedTasks = 0;
      let completedDays = 0;
      
      // Calculate task completion
      Object.values(tasksByDay).forEach(tasks => {
        totalTasks += tasks.length;
        const dayCompleted = tasks.filter(task => task.completed && task.link).length;
        completedTasks += dayCompleted;
        if (dayCompleted === tasks.length && tasks.length > 0) {
          completedDays++;
        }
      });
      
      // Update overall progress
      const overallPercentage = totalTasks > 0 ? (completedTasks / totalTasks * 100).toFixed(0) : 0;
      document.getElementById('progress').innerHTML = `Completed: <span class="font-bold">${completedTasks}</span> of <span class="font-bold">${totalTasks}</span> tasks`;
      document.getElementById('weight-progress').textContent = `${completedDays}/30 days`;
      document.getElementById('weight-bar').style.width = `${(completedDays / 30 * 100).toFixed(0)}%`;
      
      // Update progress ring
      const overallRing = document.getElementById('overall-progress-ring');
      const offset = 100 - overallPercentage;
      overallRing.setAttribute('stroke-dasharray', `${overallPercentage}, 100`);
      overallRing.parentElement.querySelector('text').textContent = `${overallPercentage}%`;
    }

    function updateDailyProgressBar(day) {
      const tasks = tasksByDay[day] || [];
      const totalTasks = tasks.length;
      const completedTasks = tasks.filter(task => task.completed && task.link).length;
      const percentage = totalTasks > 0 ? (completedTasks / totalTasks * 100).toFixed(0) : 0;
      
      // Update daily progress ring
      const dailyRing = document.getElementById('daily-progress-ring');
      dailyRing.setAttribute('stroke-dasharray', `${percentage}, 100`);
      dailyRing.parentElement.querySelector('text').textContent = `${percentage}%`;
      
      // Update progress text
      const progressText = document.getElementById('progress-text');
      if (percentage == 0) {
        progressText.textContent = "You're just getting started!";
      } else if (percentage < 50) {
        progressText.textContent = "Keep going! You're making progress.";
      } else if (percentage < 100) {
        progressText.textContent = "More than halfway there!";
      } else {
        progressText.textContent = "Perfect! You completed all tasks for today!";
      }
    }

    // Set today's date as default in date picker
    document.addEventListener('DOMContentLoaded', function() {
      const today = new Date();
      const dateStr = today.toISOString().split('T')[0];
      document.getElementById('start-date').value = dateStr;
      
      // Initialize tasks for first day
      updateTasks();
    });
  </script>
</body>
</html>
